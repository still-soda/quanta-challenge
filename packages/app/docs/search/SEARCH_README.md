# æœç´¢åŠŸèƒ½å®ç°æ€»ç»“

## âœ… å·²å®Œæˆ

### 1. æ ¸å¿ƒç»„ä»¶
- **StSearchOverlay** (`components/st/SearchOverlay/index.vue`)
  - å…¨å±è¦†ç›–å±‚ï¼Œz-index: 9999ï¼ˆä½äº Message çš„ 10000ï¼‰
  - æœç´¢è¾“å…¥æ¡†ï¼Œè‡ªåŠ¨èšç„¦
  - åŠ è½½çŠ¶æ€ã€ç©ºçŠ¶æ€ã€æ— ç»“æœçŠ¶æ€å±•ç¤º
  - ESC é”®å’Œç‚¹å‡»èƒŒæ™¯å…³é—­

- **StSearchOverlaySearchResultItem** (`components/st/SearchOverlay/SearchResultItem.vue`)
  - é€šç”¨æœç´¢ç»“æœé¡¹ç»„ä»¶
  - æ”¯æŒ 4 ç§ç»“æœç±»å‹ï¼šé¢˜ç›®ã€ç”¨æˆ·ã€æ ‡ç­¾ã€å…¬å‘Š
  - è‡ªåŠ¨å›¾æ ‡å’Œæ ·å¼åŒºåˆ†
  - å±•ç¤ºå…ƒæ•°æ®ï¼ˆéš¾åº¦ã€æ ‡ç­¾ã€ç»Ÿè®¡ç­‰ï¼‰

### 2. çŠ¶æ€ç®¡ç†
- **useSearch** (`composables/use-search.ts`)
  - å…¨å±€æœç´¢çŠ¶æ€ç®¡ç†
  - æä¾›æ‰“å¼€/å…³é—­/åˆ‡æ¢æœç´¢åŠŸèƒ½
  - æœç´¢æ‰§è¡Œæ¥å£ï¼ˆ300ms é˜²æŠ–ï¼‰
  - æœç´¢ç»“æœç®¡ç†

### 3. ç±»å‹å®šä¹‰
- **SearchResult ç±»å‹** (`types/search.ts`)
  - å®Œæ•´çš„æœç´¢ç»“æœç±»å‹ç³»ç»Ÿ
  - æ”¯æŒé¢˜ç›®ã€ç”¨æˆ·ã€æ ‡ç­¾ã€å…¬å‘Š
  - ç±»å‹å®‰å…¨çš„å…ƒæ•°æ®ç»“æ„

### 4. å¿«æ·é”®
- **Cmd/Ctrl + K**ï¼šå…¨å±€å¿«æ·é”®æ‰“å¼€æœç´¢
- **ESC**ï¼šå…³é—­æœç´¢æ¡†
- **ç‚¹å‡»æœç´¢æŒ‰é’®**ï¼šä»å¯¼èˆªæ æ‰“å¼€æœç´¢

### 5. ç¤ºä¾‹ä»£ç 
- **API ç«¯ç‚¹ç¤ºä¾‹** (`server/api/search.get.ts.example`)
  - å®Œæ•´çš„åç«¯æœç´¢ API å‚è€ƒå®ç°
  - åŒ…å«å‚æ•°éªŒè¯ã€é”™è¯¯å¤„ç†
  - Prisma æŸ¥è¯¢ç¤ºä¾‹

## ğŸ“‹ ä½¿ç”¨æ–¹å¼

### æ‰“å¼€æœç´¢
```typescript
// æ–¹å¼ 1: ä½¿ç”¨ composable
const { openSearch } = useSearch();
openSearch();

// æ–¹å¼ 2: ç‚¹å‡»å¯¼èˆªæ æœç´¢æŒ‰é’®
// æ–¹å¼ 3: æŒ‰ Cmd/Ctrl + K
```

### æ‰§è¡Œæœç´¢
æœç´¢ä¼šè‡ªåŠ¨æ‰§è¡Œï¼ˆé˜²æŠ– 300msï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ã€‚

### è‡ªå®šä¹‰æœç´¢é€»è¾‘
ç¼–è¾‘ `composables/use-search.ts` ä¸­çš„ `performSearch` æ–¹æ³•ï¼š

```typescript
const performSearch = async (query: string) => {
   if (!query.trim()) {
      searchResults.value = [];
      return;
   }

   isSearching.value = true;
   searchQuery.value = query;

   try {
      // å®ç°ä½ çš„æœç´¢ API è°ƒç”¨
      const response = await $fetch<SearchResponse>('/api/search', {
         query: { q: query, type: 'all', limit: 20 }
      });
      searchResults.value = response.results;
   } catch (error) {
      console.error('æœç´¢å¤±è´¥:', error);
      searchResults.value = [];
   } finally {
      isSearching.value = false;
   }
};
```

## ğŸ”§ å¾…å®ç°

1. **åç«¯æœç´¢ API**
   - åˆ›å»º `server/api/search.get.ts`
   - å‚è€ƒ `server/api/search.get.ts.example`
   - å®ç°æ•°æ®åº“æŸ¥è¯¢é€»è¾‘

2. **é”®ç›˜å¯¼èˆª**ï¼ˆå¯é€‰ï¼‰
   - â†‘â†“ æ–¹å‘é”®é€‰æ‹©ç»“æœ
   - Enter æ‰“å¼€é€‰ä¸­é¡¹
   - å‚è€ƒ `SEARCH_IMPLEMENTATION.md` ä¸­çš„å®ç°å»ºè®®

3. **æœç´¢å†å²**ï¼ˆå¯é€‰ï¼‰
   - ä½¿ç”¨ localStorage å­˜å‚¨æœç´¢å†å²
   - åœ¨ç©ºçŠ¶æ€æ—¶å±•ç¤ºå†å²è®°å½•

4. **çƒ­é—¨æœç´¢**ï¼ˆå¯é€‰ï¼‰
   - å±•ç¤ºçƒ­é—¨æœç´¢è¯
   - å¿«é€Ÿæœç´¢å…¥å£

5. **æœç´¢è¿‡æ»¤**ï¼ˆå¯é€‰ï¼‰
   - æ·»åŠ ç±»å‹è¿‡æ»¤å™¨ï¼ˆé¢˜ç›®/ç”¨æˆ·/æ ‡ç­¾ç­‰ï¼‰
   - æ·»åŠ éš¾åº¦ã€æ ‡ç­¾ç­‰é«˜çº§è¿‡æ»¤

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
packages/app/app/
â”œâ”€â”€ components/st/SearchOverlay/
â”‚   â”œâ”€â”€ index.vue              # ä¸»è¦†ç›–å±‚ç»„ä»¶
â”‚   â””â”€â”€ SearchResultItem.vue   # æœç´¢ç»“æœé¡¹ç»„ä»¶
â”œâ”€â”€ composables/
â”‚   â””â”€â”€ use-search.ts          # æœç´¢çŠ¶æ€ç®¡ç†
â”œâ”€â”€ types/
â”‚   â””â”€â”€ search.ts              # æœç´¢ç±»å‹å®šä¹‰
â”œâ”€â”€ layouts/
â”‚   â””â”€â”€ app-layout.vue         # å·²é›†æˆæœç´¢åŠŸèƒ½
â””â”€â”€ server/api/
    â””â”€â”€ search.get.ts.example  # API å‚è€ƒå®ç°
```

## ğŸ¨ æ ·å¼ç‰¹ç‚¹

- æ·±è‰²ä¸»é¢˜ï¼Œç¬¦åˆé¡¹ç›®æ•´ä½“é£æ ¼
- åŠé€æ˜èƒŒæ™¯ + æ¯›ç»ç’ƒæ•ˆæœ
- æµç•…çš„è¿›å…¥/é€€å‡ºåŠ¨ç”»
- è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼
- å“åº”å¼è®¾è®¡ï¼Œæœ€å¤§å®½åº¦ 42rem

## ğŸš€ ä¸‹ä¸€æ­¥

1. æ ¹æ®é¡¹ç›®æ•°æ®åº“ç»“æ„å®ç°æœç´¢ API
2. æµ‹è¯•æœç´¢åŠŸèƒ½
3. æ ¹æ®éœ€è¦æ·»åŠ é”®ç›˜å¯¼èˆª
4. è€ƒè™‘æ·»åŠ æœç´¢å†å²å’Œçƒ­é—¨æœç´¢
